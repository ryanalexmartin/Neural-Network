{"version":3,"file":"scene.js","names":["Detector","webgl","addGetWebGLMessage","container","stats","scene","light","camera","cameraCtrl","renderer","WIDTH","window","innerWidth","HEIGHT","innerHeight","pixelRatio","devicePixelRatio","screenRatio","clock","THREE","Clock","FRAME_COUNT","sceneSettings","pause","bgColor","enableGridHelper","enableAxisHelper","document","getElementById","Scene","PerspectiveCamera","OrbitControls","object","position","y","enabled","update","WebGLRenderer","antialias","alpha","setSize","setPixelRatio","setClearColor","autoClear","appendChild","domElement","aspect","updateProjectionMatrix","createParticlesFromImage","imageTexture","canvas","createElement","context","getContext","width","image","height","drawImage","imageData","getImageData","data","geometry","Geometry","x","index","red","green","blue","vertex","Vector3","color","Color","vertices","push","material","PointCloudMaterial","size","vertexColors","VertexColors","map","transparent","particles","PointCloud","convertSVGToThreeJS","svgString","objects","parser","DOMParser","svgDoc","parseFromString","childNodes","forEach","childNode","Object3D","parseFloat","getAttribute","z","rotation","scale","networkSVG","SVG","get","loader","TextureLoader","load","texture","add","networkObjects","timeline","GSAP","to","opacity","value","duration","call","animateParticlesThroughNetwork","reformImageFromParticles","animate","tick","render","requestAnimationFrame","undefined","console","error"],"sources":["../scene.js"],"sourcesContent":["// var GSAP = require('gsap');\n// var SVG = require('svg.js');\n\n// Scene --------------------------------------------------------\n/* exported updateHelpers */\n\nif (!Detector.webgl) {\n\tDetector.addGetWebGLMessage();\n}\n\nvar container, stats;\nvar scene, light, camera, cameraCtrl, renderer;\nvar WIDTH = window.innerWidth;\nvar HEIGHT = window.innerHeight;\nvar pixelRatio = window.devicePixelRatio || 1;\nvar screenRatio = WIDTH / HEIGHT;\nvar clock = new THREE.Clock();\nvar FRAME_COUNT = 0;\n\n// ---- Settings\nvar sceneSettings = {\n\tpause: false,\n\tbgColor: 0x010c14,\n\tenableGridHelper: false,\n\tenableAxisHelper: false\n};\n\n// ---- Scene\ncontainer = document.getElementById('canvas-container');\nscene = new THREE.Scene();\n\n// ---- Camera\ncamera = new THREE.PerspectiveCamera(75, screenRatio, 10, 5000);\n// camera orbit control\ncameraCtrl = new THREE.OrbitControls(camera, container);\ncameraCtrl.object.position.y = 1;\ncameraCtrl.enabled = false;\ncameraCtrl.update();\n\n// ---- Renderer\nrenderer = new THREE.WebGLRenderer({\n\tantialias: true,\n\talpha: true\n});\nrenderer.setSize(WIDTH, HEIGHT);\nrenderer.setPixelRatio(pixelRatio);\nrenderer.setClearColor(sceneSettings.bgColor, 1);\nrenderer.autoClear = false;\ncontainer.appendChild(renderer.domElement);\n\n// ---- Resize once to match browser's initial size\ncamera.aspect = screenRatio;\ncamera.updateProjectionMatrix();\nrenderer.setSize(WIDTH, HEIGHT);\nrenderer.setPixelRatio(pixelRatio);\n\n// ---- Stats\n// stats = new Stats();\n// container.appendChild( stats.domElement );\n\n// ---- grid & axis helper\n// var gridHelper = new THREE.GridHelper( 600, 50 );\n// gridHelper.setColors( 0x00bbff, 0xffffff );\n// gridHelper.material.opacity = 0.1;\n// gridHelper.material.transparent = true;\n// gridHelper.position.y = -300;\n// scene.add( gridHelper );\n\n// var axisHelper = new THREE.AxisHelper( 50 );\n// scene.add( axisHelper );\n\n// function updateHelpers() {\n// \taxisHelper.visible = sceneSettings.enableAxisHelper;\n// \tgridHelper.visible = sceneSettings.enableGridHelper;\n// }\n\n/*\n// ---- Lights\n// back light\nlight = new THREE.DirectionalLight( 0xffffff, 0.8 );\nlight.position.set( 100, 230, -100 );\nscene.add( light );\n\n// hemi\nlight = new THREE.HemisphereLight( 0x00ffff, 0x29295e, 1 );\nlight.position.set( 370, 200, 20 );\nscene.add( light );\n\n// ambient\nlight = new THREE.AmbientLight( 0x111111 );\nscene.add( light );\n*/\n\n\n\n// vector animation (new)\n\n\nfunction createParticlesFromImage(imageTexture) {\n\t// Create a canvas to draw the image\n\tvar canvas = document.createElement('canvas');\n\tvar context = canvas.getContext('2d');\n\n\t// Draw the image onto the canvas\n\tcanvas.width = imageTexture.image.width;\n\tcanvas.height = imageTexture.image.height;\n\tcontext.drawImage(imageTexture.image, 0, 0, canvas.width, canvas.height);\n\n\t// Get the image data from the canvas\n\tvar imageData = context.getImageData(0, 0, canvas.width, canvas.height);\n\tvar data = imageData.data;\n\n\t// Create the particle system geometry\n\tvar geometry = new THREE.Geometry();\n\n\t// For each pixel in the image, create a vertex in the geometry\n\tfor (var y = 0; y < canvas.height; y++) {\n\t\tfor (var x = 0; x < canvas.width; x++) {\n\t\t\t// Get the color of the pixel\n\t\t\tvar index = (y * canvas.width + x) * 4;\n\t\t\tvar red = data[index];\n\t\t\tvar green = data[index + 1];\n\t\t\tvar blue = data[index + 2];\n\n\t\t\t// Create a new vertex for the particle system\n\t\t\tvar vertex = new THREE.Vector3(x - canvas.width / 2, -y + canvas.height / 2, 0);\n\n\t\t\t// Set the color of the vertex based on the color of the pixel\n\t\t\tvertex.color = new THREE.Color('rgb(' + red + ',' + green + ',' + blue + ')');\n\n\t\t\t// Add the vertex to the geometry\n\t\t\tgeometry.vertices.push(vertex);\n\t\t}\n\t}\n\n\t// Create the material for the particle system\n\tvar material = new THREE.PointCloudMaterial({\n\t\tsize: 1,\n\t\tvertexColors: THREE.VertexColors, // This allows us to use the colors we set for each vertex\n\t\tmap: imageTexture, // This texture will be applied to each particle\n\t\ttransparent: true\n\t});\n\n\t// Create the particle system and return it\n\tvar particles = new THREE.PointCloud(geometry, material);\n\treturn particles;\n}\n\nfunction convertSVGToThreeJS(svgString) {\n\tconst objects = [];\n\n\t// Parse the SVG string into an SVG document\n\tconst parser = new DOMParser();\n\tconst svgDoc = parser.parseFromString(svgString, \"image/svg+xml\");\n\n\t// Loop through each child element of the SVG document\n\tsvgDoc.childNodes.forEach(childNode => {\n\t\t// Create a new object for each child element\n\t\tconst object = new THREE.Object3D();\n\n\t\t// Set the position of the object based on the child element's attributes\n\t\tobject.position.x = parseFloat(childNode.getAttribute(\"x\")) || 0;\n\t\tobject.position.y = parseFloat(childNode.getAttribute(\"y\")) || 0;\n\t\tobject.position.z = parseFloat(childNode.getAttribute(\"z\")) || 0;\n\n\t\t// Set the rotation of the object based on the child element's attributes\n\t\tobject.rotation.x = parseFloat(childNode.getAttribute(\"rx\")) || 0;\n\t\tobject.rotation.y = parseFloat(childNode.getAttribute(\"ry\")) || 0;\n\t\tobject.rotation.z = parseFloat(childNode.getAttribute(\"rz\")) || 0;\n\n\t\t// Set the scale of the object based on the child element's attributes\n\t\tobject.scale.x = parseFloat(childNode.getAttribute(\"scale-x\")) || 1;\n\t\tobject.scale.y = parseFloat(childNode.getAttribute(\"scale-y\")) || 1;\n\t\tobject.scale.z = parseFloat(childNode.getAttribute(\"scale-z\")) || 1;\n\n\t\t// Add the object to the array\n\t\tobjects.push(object);\n\t});\n\n\treturn objects;\n}\n\n\n\n// Assuming your Three.js scene, camera, and renderer are already set up, \n// you would have something like the following in your code:\n\n// const scene = existing scene\n// const camera = existing camera\n// const renderer = existing renderer\n\nconst networkSVG = SVG.get('sprites/nn(2).svg');\nvar loader = new THREE.TextureLoader();\n\nloader.load(\n\t// resource URL\n\t\"sprites/img_4721.png\",\n\n\t// onLoad callback\n\tfunction (texture) {\n\t\t// the texture is fully loaded at this point\n\n\t\t// Convert Image to Particles\n\t\tconst particles = createParticlesFromImage(texture);\n\n\t\tscene.add(particles);\n\n\t\t// Convert SVG to Three.js objects\n\t\tconst networkObjects = convertSVGToThreeJS(networkSVG);\n\t\tnetworkObjects.forEach(function (object) {\n\t\t\tscene.add(object);\n\t\t});\n\n\t\t// Position camera to view the whole scene\n\t\tcamera.position.z = 5; // adjust this value to fit your specific scene\n\n\t\t// Create Animation Timeline\n\t\tconst timeline = GSAP.timeline();\n\n\t\ttimeline.to(particles.material.opacity, { value: 0, duration: 2 });\n\t\ttimeline.call(animateParticlesThroughNetwork, [particles, networkSVG], \"+=2\");\n\t\ttimeline.call(reformImageFromParticles, [particles], \"+=2\");\n\n\t\t// If your animation loop is already running, just add GSAP.tick(); to it\n\t\tfunction animate() {\n\t\t\tGSAP.tick();\n\t\t\trenderer.render(scene, camera);\n\t\t\trequestAnimationFrame(animate);\n\t\t}\n\n\t\t// assuming 'scene' is your THREE.Scene instance\n\t\tscene.add(particles);\n\t},\n\n\t// onProgress callback currently not supported\n\tundefined,\n\n\t// onError callback\n\tfunction () {\n\t\tconsole.error('An error occurred while loading the texture');\n\t}\n);\n"],"mappings":"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"}