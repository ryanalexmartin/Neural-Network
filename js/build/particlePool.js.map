{"version":3,"file":"particlePool.js","names":["ParticlePool","poolSize","spriteTextureSignal","TEXTURES","electric","pGeom","THREE","Geometry","particles","vertices","offScreenPos","Vector3","pColor","pSize","ii","Particle","meshComponents","Object3D","pMat","PointCloudMaterial","map","size","color","blending","AdditiveBlending","depthTest","transparent","pMesh","PointCloud","frustumCulled","add","pMat_outer","clone","opacity","pMesh_outer","prototype","getAvgExecutionTime","profTime","itt","getParticle","p","available","lastAvailableIdx","console","error","update","verticesNeedUpdate","updateSettings","setStyle"],"sources":["../particlePool.js"],"sourcesContent":["// Particle Pool ---------------------------------------------------------\n\nfunction ParticlePool( poolSize ) {\n\n\tthis.spriteTextureSignal = TEXTURES.electric;\n\n\tthis.poolSize = poolSize;\n\tthis.pGeom = new THREE.Geometry();\n\tthis.particles = this.pGeom.vertices;\n\n\tthis.offScreenPos = new THREE.Vector3( 9999, 9999, 9999 );\n\n\tthis.pColor = '#37edb8';\n\tthis.pSize = 0.2;\n\n\tfor ( var ii = 0; ii < this.poolSize; ii++ ) {\n\t\tthis.particles[ ii ] = new Particle( this );\n\t}\n\n\tthis.meshComponents = new THREE.Object3D();\n\n\t// inner particle\n\tthis.pMat = new THREE.PointCloudMaterial( {\n\t\tmap: this.spriteTextureSignal,\n\t\tsize: this.pSize,\n\t\tcolor: this.pColor,\n\t\tblending: THREE.AdditiveBlending,\n\t\tdepthTest: false,\n\t\ttransparent: true\n\t} );\n\n\tthis.pMesh = new THREE.PointCloud( this.pGeom, this.pMat );\n\tthis.pMesh.frustumCulled = false;\n\n\tthis.meshComponents.add( this.pMesh );\n\n\n\t// outer particle glow\n\tthis.pMat_outer = this.pMat.clone();\n\tthis.pMat_outer.size = this.pSize * 10;\n\tthis.pMat_outer.opacity = 0.04;\n\n\tthis.pMesh_outer = new THREE.PointCloud( this.pGeom, this.pMat_outer );\n\tthis.pMesh_outer.frustumCulled = false;\n\n\tthis.meshComponents.add( this.pMesh_outer );\n\n}\n\nParticlePool.prototype.getAvgExecutionTime = function () {\n\treturn this.profTime / this.itt;\n};\n\nParticlePool.prototype.getParticle = function () {\n\n\tfor ( var ii = 0; ii < this.poolSize; ii++ ) {\n\t\tvar p = this.particles[ ii ];\n\t\tif ( p.available ) {\n\t\t\tthis.lastAvailableIdx = ii;\n\t\t\tp.available = false;\n\t\t\treturn p;\n\t\t}\n\t}\n\n\tconsole.error( \"ParticlePool.prototype.getParticle return null\" );\n\treturn null;\n\n};\n\nParticlePool.prototype.update = function () {\n\n\tthis.pGeom.verticesNeedUpdate = true;\n\n};\n\nParticlePool.prototype.updateSettings = function () {\n\n\t// inner particle\n\tthis.pMat.color.setStyle( this.pColor );\n\tthis.pMat.size = this.pSize;\n\t// outer particle\n\tthis.pMat_outer.color.setStyle( this.pColor );\n\tthis.pMat_outer.size = this.pSize * 10;\n\n};\n"],"mappings":"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"}